/*! cheerwe-js 02-11-2015 */
!function(){var $we={version:"1.0.0",backCompat:"BackCompat"==document.compatMode?!0:!1};$we.apply=function(a,b){if(a&&b&&"object"==typeof b){for(var c in b)a[c]=b[c];for(var d=2;d<arguments.length;d++)arguments.callee(a,arguments[d]);return a}};var toJsonStr=function(a){if(void 0===a)return"undefined";if(null===a)return"null";var b=[];switch(typeof a){case"object":if(a instanceof Array){b.push("[");for(var c=0,d=a.length;d>c;c++)b.push(toJsonStr(a[c])),b.push(",");b.length>1&&b.pop(),b.push("]")}else{b.push("{");for(var e in a)void 0!=e&&(b.push('"'+e+'":'),b.push(toJsonStr(a[e])),b.push(","));b.length>1&&b.pop(),b.push("}")}break;case"string":b.push('"'),b.push(a.replace(/"/g,'"')),b.push('"');break;case"number":b.push(a);break;case"boolean":b.push('"'),b.push(a),b.push('"');break;case"funciton":break;default:b.push('"'),b.push(a),b.push('"')}return b.join("")};$we.apply($we,{toJson:function(a){return toJsonStr(a)},parseJson:function(str){try{var json=eval("("+str+")");return json}catch(e){return null}}}),$we.clone=function(a){var b;switch(typeof a){case"object":if(a instanceof Array){b=[];for(var c=0,d=a.length;d>c;c++)b[c]=$we.clone(a[c])}else{if(!a)return a;b={};for(var e in a)b[e]=$we.clone(a[e])}break;default:b=a}return b};var cloneObjProperties=function(a){for(var b in a)"object"==typeof a[b]&&"superclass"!=b&&"scope"!=b&&(a[b]=$we.clone(a[b]));return a};$we.extend=function(a,b){1==arguments.length&&(b=a,a=null);var c=function(a){cloneObjProperties(this),$we.apply(this,a),this.init=this.init||function(){},this.init(a)};if(!arguments.length)return c;var d=c.prototype;if(a){var e=a.prototype,f=function(){};f.prototype=e,d=new f,d.constructor=c,c.superclass=e,c.prototype.superclass=e}return b&&$we.apply(d,b),$we.apply(c.prototype,d),c},$we.apply($we,{clearSelection:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()},log:function(a){window.console&&console.log(a)},applyIf:function(a,b){if(a&&b&&"object"==typeof b){for(var c in b)void 0==a[c]&&(a[c]=b[c]);for(var d=2;d<arguments.length;d++)arguments.callee(a,arguments[d]);return a}},ns:function(){var a=arguments,o=null,i,j,d,rt;for(i=0;i<a.length;++i)for(d=a[i].split("."),rt=d[0],eval("if (typeof "+rt+' == "undefined"){'+rt+" = {};} o = "+rt+";"),j=1;j<d.length;++j)o[d[j]]=o[d[j]]||{},o=o[d[j]]},override:function(a,b,c){var d=a.prototype;c=c===!1?!1:!0;for(var e in b)if(!d[e]||c){b[e];d[e]=b[e]}},createId:function(a,b){a=a||"",a+="x_"==a.substr(0,2)?"":"x_",a+="_"==a.substr(a.length-1,1)?"":"_",b=b||5;var c=Math.random()*Math.pow(10,b)+"";return a+c.substr(0,c.indexOf("."))},format:function(a){var b=Array.prototype.slice.call(arguments,1);return a.length&&a instanceof Array&&(a=$we.join(a)),a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})},parse:function(a,b){var c;"object"==typeof a&&a instanceof Array&&(a=$we.join(a));for(var d in b)c=new RegExp("{"+d+"}","g"),a=a.replace(c,b[d]);return a},getNavInfo:function(){var a=navigator.userAgent.toLowerCase(),b=function(b){return b.test(a)},c={};return c.isStrict="CSS1Compat"==document.compatMode,c.isOpera=b(/opera/),c.isChrome=b(/chrome/),c.isWebKit=b(/webkit/),c.isSafari=!c.isChrome&&b(/safari/),c.isSafari2=c.isSafari&&b(/applewebkit\/4/),c.isSafari3=c.isSafari&&b(/version\/3/),c.isSafari4=c.isSafari&&b(/version\/4/),c.isIE=!c.isOpera&&b(/msie/),c.isIE7=c.isIE&&b(/msie 7/),c.isIE8=c.isIE&&b(/msie 8/),c.isIE6=c.isIE&&!c.isIE7&&!c.isIE8,c.isGecko=!c.isWebKit&&b(/gecko/),c.isGecko2=c.isGecko&&b(/rv:1\.8/),c.isGecko3=c.isGecko&&b(/rv:1\.9/),c.isBorderBox=c.isIE&&!c.isStrict,c.isWindows=b(/windows|win32/),c.isMac=b(/macintosh|mac os x/),c.isAir=b(/adobeair/),c.isLinux=b(/linux/),c.isSecure=/^https/i.test(window.location.protocol),c},getContentSize:function(a){a=a||document;var b=a.body;return{height:b.scrollHeight,width:b.scrollWidth}},getPageSize:function(a){a=a||window;var b=a.document;return a.innerHeight?{width:a.innerWidth,height:a.innerHeight}:b.documentElement&&b.documentElement.clientHeight?{width:b.documentElement.clientWidth,height:b.documentElement.clientHeight}:{width:b.body.offsetWidth,height:b.body.offsetHeight}},contains:function(a,b,c){return c=void 0===c?",":"",a=c+a+c,b=c+b+c,-1==a.indexOf(b)?!1:!0},trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},leftTrim:function(a){return a.replace(/(^\s*)/g,"")},rightTrim:function(a){return a.replace(/(\s*$)/g,"")},isArray:function(a){return"[object Array]"===Object.prototype.toString.apply(a)},isNumber:function(a){return!isNaN(a)},isEmail:function(a){return/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(a)},isPhoneNo:function(a){return/\d{3}-\d{8}|\d{4}-\d{7}/.test(a)},isPostNo:function(a){return/[1-9]\d{5}(?!\d)/.test(a)},isIDNo:function(a){return/\d{15}|\d{18}/.test(a)},isInt:function(a){return/^-?[1-9]\d*$/.test(a)},isPosInt:function(a){return/^[1-9]\d*$/.test(a)},isNegInt:function(a){return/^-[1-9]\d*$/.test(a)},isMobileNo:function(a){return/^1[3|4|5|7|8][0-9]\d{4,8}$/.test(a)},isMoney:function(a){return/^(-)?(([1-9]{1}\d*)|([0]{1}))(\.(\d){1,2})?$/.test(a)},isPosMoney:function(a){return/^(([1-9]{1}\d*)|([0]{1}))(\.(\d){1,2})?$/.test(a)},isNegMoney:function(a){return/^(-)(([1-9]{1}\d*)|([0]{1}))(\.(\d){1,2})?$/.test(a)}}),$we.na=$we.getNavInfo(),$we.ieBox=$we.na.isIE&&$we.backCompat;var __instance={};$we.apply($we,{instance:{},add:function(a){a&&(a.id=a.id||$we.createId(),__instance[a.id]=a)},get:function(a){return __instance[a]},remove:function(a){a&&($we.destory(a),"object"==typeof a&&(a=a.___weId||a.id),delete __instance[a.id])},destory:function(a){if(!a){"function"==typeof a.destory&&a.destory(),"function"==typeof a.removeAllListeners&&a.removeAllListeners();var b=a._events;for(var c in b)delete b[c];for(var d in a)delete a[d]}}}),$we.Object=$we.extend({_events:{},listeners:{},fireEvent:function(a,b){if(arguments.length){var c=this._events[a];if(c)for(var d=0,e=c.handler.length;e>d;d++){var f=c.handler[d];try{f.fn.call(f.scope||this,{e:a,eventData:b,data:f.data})}catch(a){}}}},addEventListener:function(a,b,c,d){arguments.length<2||(this._events[a]=this._events[a]||{name:a,handler:[]},this._events[a].handler.push({fn:b,data:d,scope:c}))},removeEventListener:function(a,b){if(arguments.length)if(b){if(this._events[a])for(var c=this._events[a].handler,d=0,e=c.length;e>d;d++)c[d]==b&&c.splice(d,1)}else this._events[a]&&delete this._events[a]},removeAllEventListener:function(){var a=this._events;for(var b in a)this.removeEventListener(b)},fire:function(){this.fireEvent.apply(this,arguments)},on:function(){this.addEventListener.apply(this,arguments)},un:function(){this.addEventListener.apply(this,arguments)},initListener:function(a){if(a)for(var b in a){var c=a[b];this.addEventListener(b,c.fn,c.scope,c.data)}},destory:function(){this.dieEvent();for(var a in this)this[a]=null},doInit:function(){},init:function(a){this.id||(this.id=$we.createId()),$we.add(this),this._events={},this.initListener(this.listeners),this.doInit(a),this.fire("afterinit")}});var DateUtil={parse:function(a){var b=null;try{b=new Date(a)}catch(c){b=null}return b},format:function(a,b){if(!a)return"";if("string"==typeof a)a=new Date(a);else if("object"==typeof a&&!(a instanceof Date))return"";b=b||"yyyy-MM-dd HH:mm:ss";var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},addDay:function(a,b){return DateUtil.addHour(a,24)},addHour:function(a,b){return DateUtil.addMinute(a,60*b)},addMinute:function(a,b){return DateUtil.addSecond(a,60*b)},addSecond:function(a,b){return DateUtil.addTime(a,1e3*b)},addTime:function(a,b){var c=a.getTime()+b;return a.setTime(c),a},subDate:function(a,b,c){a=new Date(a),b=new Date(b);var d=a-b,e=0;return"ms"==c?e=1:"s"==c?e=1e3:"m"==c?e=6e4:"H"==c?e=36e5:"d"==c&&(e=864e5),e?d/e:0}};$we.Date=DateUtil,$we.formatDate=DateUtil.format,$we.parseDate=DateUtil.parse,$we.apply($we,{htmlEncode:function(a){var b="";return 0==a.length?"":(b=a.replace(/&/g,"&amp;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/\'/g,"&#39;"),b=b.replace(/\"/g,"&quot;"))},htmlDecode:function(a){var b="";return 0==a.length?"":(b=a.replace(/&amp;/g,"&"),b=b.replace(/&lt;/g,"<"),b=b.replace(/&gt;/g,">"),b=b.replace(/&#39;/g,"'"),b=b.replace(/&quot;/g,'"'))}}),window.wejs=window.$we=$we}(),function(a,b){a.ajax=function(c){return c=b.extend({},{dataType:"json",method:"POST",headers:{isAjax:!0},onComplete:function(){},onSuccess:function(){},onFail:function(b){a.msg.error(b.msg)},onError:function(){},success:function(a){a.success?this.onSuccess.call(this.scope||this,a):this.onFail.call(this.scope||this,a),this.onComplete.call(this.scope||this,a)},error:function(a){this.onError.call(this.scope||this,a),this.onComplete.call(this.scope||this,a)}},c),b.ajax(c)}}(wejs,jQuery),function(a,b){if(a&&b){var c=function(a){var b=a[0];return upperFc=b.toUpperCase(),["set",upperFc,a.substr(1)].join("")};a.Component=a.extend(a.Object,{el:"",cls:"",id:"",events:[],__doInitEvents:function(){for(var a=this.events,b=0,c=a.length;c>b;b++){var d=a[b],e=d.event,f=d.selector,g=d.handler;"string"==typeof g&&(g=this[g]),g&&f?this.el.on(e,f,{handler:g,scope:this},function(a){var b=a.data;b.handler.call(b.scope,a),a.stopPropagation()}):this.el.on(e,g)}},__doDestoryEvents:function(){for(var a=this.events,b=0,c=a.length;c>b;b++){var d=a[b],f=d.event,g=d.selector,h=d.handler;"string"==typeof h&&(h=this[h]),g?this.el.off(f,g):this.el.off(e)}},$:function(a){return this.el.find(a)},destroy:function(){this.__doDestoryEvents(),this.el.empty()},initEvents:function(){},render:function(){},renderTo:function(a){this.el.appendTo(a)},set:function(a){for(var b in a){var d=a[b],e=c(b);this[e]?this[e](d):"el"!==b&&(this[b]=d)}},show:function(){this.el.show()},hide:function(){this.el.hide()},doInit:function(){this.el?this.el=b(this.el):this.el=b("<div></div>"),this.id=this.id||this.el.attr("id")||a.createId(),this.el.attr("__weid",this.id).addClass(this.cls),this.__doInitEvents(),this.initEvents(),a.add(this)}});var d=function(b){return function(c){var e=[].concat(c.events||[],b.prototype.events);c.events=e;var f=a.extend(b,c);return f.extend=d(f),f}};a.Component.extend=d(a.Component);var f={};a.add=function(a){f[a.id]=a},a.get=function(a){return f[a]};var g=function(a,b){var c=b;try{switch(a){case"function":break;case"number":b-=0;break;case"object":break;case"bool":b="true"===b?!0:!1;break;case"boolean":b="true"===b?!0:!1;break;default:b=b}c=b}catch(d){}return c},h=function(a,b){for(var c=a.attributes,d={},e=0,f=b.length;f>e;e++){var h=b[e],i=c.getNamedItem("on"+h);if(i){var j=i.value;d[h]={fn:g("function",j)}}}return d},i=function(a,b){var c={};for(var d in b){var e=null,f=b[d];if("events"==d)c.listeners=h(a,f);else if(e=a.attributes.getNamedItem(d)){var i=e.value;c[d]=g(f,i)}}return c},j=function(a,c,d,e){b(a).each(function(){var a=i(this,d),f=b(this),g=f.attr("__weid");if(a.el=f,a.id=this.id,!g){var h=new c(a);e=e===!1?!1:!0,e&&h.render(),""===a.id&&delete a.id,h.set(a)}})},k=[];a.autoRender=function(a,b,c,d){var e=arguments.length;if(0==e)for(var f=0,g=k.length;g>f;f++)k[f].autoRender();else(3==e||4==e)&&(b.autoRender=function(a,b,c,d){return function(e){j(e||a,b,c,d)}}(a,b,c,d),k.push(b))},b(function(){a.autoRender()})}}(wejs,jQuery),function(){var a="";$we.mask=function(b){if(!a){a=$we.createId();var c=$we.getPageSize();$(document.body).append(['<div class="" id="',a,'" style="width:',c.width,"px;height:",c.height,'px;"></div>'].join(""))}var d=$("#"+a);switch(d.get(0).className="wejs-mask",b){case"loading":d.addClass("wejs-mask-loading");break;case"hide":}"hide"==b?d.hide():d.show()}}(),function(a,b){if(a&&b){var c={success:"success",error:"error",warring:"warring",info:"info"},d=function(a){return a instanceof b||(a=b(a)),a},e=function(a){return a.find("input,select,textarea")},f=function(a,b){var c=a.name,d=a.value;switch(a.type){case"radio":a.checked&&(b[c]=d);break;case"checkbox":a.checked&&(b[c]?(b[c]=b[c].split(","),b[c].push(d)):b[c]=[d],b[c]=b[c].join(","));break;default:b[c]=d}return b},g=function(a,b,c){a.name;switch(b+="",a.type){case"radio":a.value==b&&(a.checked=!0);break;case"checkbox":-1!=(","+b+",").indexOf(","+a.value+",")&&(a.checked=!0);break;default:a.value=b}},h={getData:function(a,b){var c={};b=b===!1?!1:!0,a=d(a);var g=e(a);return g.each(function(){var a=this.tagName.toLowerCase(),d=this.name,e=this.value;!d||!e&&b||("input"==a?f(this,c):c[d]=e)}),c},setData:function(a,b,c){a=d(a);var f=e(a);f.each(function(){var a=this.tagName.toLowerCase(),d=this.name,e=b[d];e=0===e?"0":e,d&&(c||void 0!==e)&&("input"==a?g(this,e||"",b):this.value=e||"")})},validate:function(a){a=d(a);var c=e(a),f=!0;return c.each(function(){f=h.validateEl(b(this))&&f}),f},clearValidate:function(a){a=d(a);var c=e(a);c.each(function(){h.hideValidateMsg(b(this))})},validateEl:function(a){var b=a.data("rule"),c=a.data("rule-message"),d=a.val();if(b){b=b.split(";");for(var e=0,f=b.length;f>e;e++){var g=b[e];if(g){var j=i.run(g,d);if(!j.result)return c=i.getMessage(j,c),h.showValidateMsg(a,c,"error"),!1;h.hideValidateMsg(a)}}}return!0},showValidateMsg:function(a,b,d){d=d;var e=c[d];h.hideValidateMsg(a),a.parents(".control-group:first").addClass(e),a.tooltip({title:b,placement:"right",container:a.parent()}),a.get(0).validateCls=e,a.validateCls=e,a.tooltip("show")},hideValidateMsg:function(a){var b=a.get(0).validateCls;b&&a.parent().parent().removeClass(a.get(0).validateCls),a.tooltip("destroy")},initValidate:function(a){a=d(a);var c=e(a);c.each(function(){var a=b(this);a.on("change",function(){h.hideValidateMsg(a)})})}},i={add:function(a,b){a&&(a=a.toLowerCase(),i.rules[a]=b)},"delete":function(a){a=a.toLowerCase(),delete i.rules[a]},run:function(a,b){if("string"==typeof a){var c=i.readExpr(a),d=c.validate,e=c.data||[],f=!0;if(d){var g=[b].concat(e);f=d.check.apply(d,g)}return c.result=f,c}},readExpr:function(a){a=a.split(":");var b=a[0],c=a.length>1?a[1]:"";return c=c?c.split(","):[],b=b.toLowerCase(),{name:b,data:c,validate:i.rules[b]}},readMessage:function(a,b){if(!a)return null;a=a.split(";");for(var c={},d=0,e=a.length;e>d;d++){var f=a[d];if(f=f.split(":"),f.length>1){var g=f[0],h=f[1];c[g]=h}}return c[b]},getMessage:function(b,c){return c&&(c=i.readMessage(c,b.name)),c=c||b.validate.errorMsg,c=[c].concat(b.data),a.format.apply(a,c)},rules:{required:{errorMsg:"不能为空！",successMsg:"",infoMsg:"不能为空！",check:function(a){return!!a},message:function(a){return a?"":this.errorMsg}},number:{errorMsg:"请填写数字！",successMsg:"",infoMsg:"请填写数字！",check:function(b){return!b||a.isNumber(b)}},email:{errorMsg:"请填写邮箱！",successMsg:"",infoMsg:"请填写邮箱！",check:function(b){return!b||a.isEmail(b)}},money:{errorMsg:"请填写金额！",successMsg:"",infoMsg:"请填写金额！",check:function(b){return!b||a.isMoney(b)}},mobile:{errorMsg:"请填写手机号码！",successMsg:"",infoMsg:"请填写手机号码！",check:function(b){return!b||a.isMobileNo(b)}},"int":{errorMsg:"请填写整数！",successMsg:"",infoMsg:"请填写整数！",check:function(b){return!b||a.isInt(b)}},idno:{errorMsg:"请填写正确的身份证号码，15位或18位！",successMsg:"",infoMsg:"15位或18位！",check:function(b){return!b||a.isIDNo(b)}},phone:{errorMsg:"请填写电话号码！",successMsg:"",infoMsg:"请填写电话号码！",check:function(b){return!b||a.isPhoneNo(b)}},post:{errorMsg:"请填写电话号码！",successMsg:"",infoMsg:"请填写电话号码！",check:function(b){return!b||a.isPostNo(b)}},min:{errorMsg:"不能小于{0}！",successMsg:"",infoMsg:"不能小于{0}！",check:function(a,b){return""===a?!0:(b-=0,a-=0,a>=b)}},max:{errorMsg:"不能大于{0}！",successMsg:"",infoMsg:"不能大于{0}！",check:function(a,b){return""===a?!0:(b-=0,a-=0,b>=0)}},range:{errorMsg:"大小范围在{0}-{1}之内！",successMsg:"",infoMsg:"大小范围在{0}-{1}之内！",check:function(a,b,c){return""===a?!0:(a-=0,b-=0,c-=0,a>=b&&c>=a)}},rangelength:{errorMsg:"长度范围在{0}-{1}之内！",successMsg:"",infoMsg:"长度范围在{0}-{1}之内！",check:function(a,b,c){if(!a)return!0;var d=a.length;return b-=0,c-=0,d>=b&&c>=d}},minlength:{errorMsg:"不能小于{0}个字符！",successMsg:"",infoMsg:"不能小于{0}个字符！",check:function(a,b){if(!a)return!0;var c=a.length;return b-=0,max-=0,c>=b}},maxlength:{errorMsg:"不能大于{0}个字符！",successMsg:"",infoMsg:"不能大于{0}个字符！",check:function(a,b){if(!a)return!0;var c=a.length;return min-=0,b-=0,b>=c}},compare:{errorMsg:"两次输入的结果不相同！",successMsg:"",check:function(a,c){return b(c).val()==a}}}};a.Validate=i,a.Verification=i,a.Form=h}}(wejs,jQuery),function(a,b){if(a&&b){a.ns("wejs.msg");var c="__wejs_msg",d={info:"alert-info",success:"alert-success",warning:"alert-block",error:"alert-error"},e=function(){var a=b("#"+c);return a.length||(a=b('<div id="'+c+'"></div>'),a.appendTo(document.body)),a.get(0).className="alert",a};a.apply(a.msg,{show:function(b,c){var f=e();f.addClass(d[c]),f.html(b).show().css({"z-index":1e5,position:"fixed"});var g=a.getPageSize(),h=(g.width-f.width())/2;return f.css({top:-50,left:h}),f.animate({top:50}),setTimeout(function(){a.msg.hide()},3e3),f},hide:function(){e().animate({top:-50})},info:function(a){this.show(a,"info")},success:function(a){this.show(a,"success")},warning:function(a){this.show(a,"warning")},error:function(a){this.show(a,"error")}}),a.Msg=a.msg}}(wejs,jQuery),function(){var a='[data-role="input"]',b='[data-role="sub-btn"]',c='[data-role="add-btn"]';$we.NumberEditor=$we.Component.extend({min:null,max:null,minGear:null,maxGear:null,cls:"we-number-editor input-prepend input-append",inputSize:"medium",inputAlign:"center",name:"",value:0,events:[{event:"click",selector:c,handler:"_doAdd"},{event:"click",selector:b,handler:"_doSub"},{event:"keydown",selector:a,handler:"_doKeyup"},{event:"change",selector:a,handler:"_doInputChange"}],_doChange:function(){this.fire("change");var a=this.getValue();this.minGear&&$we.get(this.minGear).setMin(a),this.maxGear&&$we.get(this.maxGear).setMax(a)},_doSub:function(){var a=this.getValue(),b=this.min;a--,(null===b||a>=b)&&this.setValue(a),this._doChange()},_doAdd:function(){var a=this.getValue(),b=this.max;a++,(null===b||b>=a)&&this.setValue(a),this._doChange()},_doKeyup:function(a){var b=a.keyCode;b>=48&&57>=b||190==b||18==b||a.preventDefault()},_doInputChange:function(a){var b=this.getInputEl().val(),c=this.min,d=this.max;b-=0,null!==c&&c>b?b=c:null!==d&&b>d&&(b=d),this.getInputEl().val(b),this._doChange()},setMin:function(a){this.min=a},getMin:function(){return this.min},setMax:function(a){this.max=a},getMax:function(){return this.max},setInputSize:function(a){var b=this.getInputEl();b.removeClass("input-"+this.inputSize),this.inputSize=a,a&&b.addClass("input-"+this.inputSize)},getInputSize:function(){return this.inputSize},setName:function(a){this.name=a,this.getInputEl().attr("name",a)},getName:function(){return this.name},getInputEl:function(){return this.el.find(a)},setValue:function(a){isNaN(a)||this.getInputEl().val(a)},getValue:function(){return this.getInputEl().val()-0},setInputAlign:function(a){this.align=a,this.getInputEl().css("text-align",a)},getInputAlign:function(){return this.inputAlign},render:function(){var a=this.el,b=['<button class="btn" type="button" data-role="sub-btn">-</button>','<input type="text" class="" value="" name="" data-role="input">','<button class="btn" type="button" data-role="add-btn">+</button>'];a.html(b.join("")),this.set({value:this.value,inputAlign:this.inputAlign,inputSize:this.inputSize})}});var d='[data-role="wejs-number-editor"]';$we.autoRender(d,$we.NumberEditor,{name:"string",inputSize:"string",min:"number",value:"string",minGear:"string",maxGear:"string",events:["change"]})}(),function(){var a=['<input type="text" class="" value="" name="" data-role="input">','<button class="btn" type="button" data-role="btn">','<i class="icon-calendar"></i>',"</button>"].join(""),b='[data-role="input"]',c='[data-role="btn"]',d=function(a,b){return b=b||"yyyy-MM-dd",a&&0==a.indexOf("now")&&(a=(a.replace("now","")||"0")-0,a=24*a*3600*1e3,a=(new Date).getTime()+a,a=new Date(a),a=$we.Date.format(a,b)),a};$we.DatePicker=$we.Component.extend({format:"yyyy-MM-dd",min:"",max:"",minGear:"",maxGear:"",name:"",placeHolder:"",inputSize:"medium",cls:"we-date-picker input-append",doubleCalendar:!1,events:[{event:"click",selector:c,handler:"_doShowCalendar"}],_onPicked:function(){var a=this.getValue();if(this.fire("change",a),this.minGear){var b=$we.get(this.minGear);b&&(b.setMin(a),b.showSelector())}if(this.maxGear){var c=$we.get(this.maxGear);c&&c.setMax(a)}},_doShowCalendar:function(){var a=this.getInputEl(),b=this,c={el:a.get(0),doubleCalendar:this.doubleCalendar,dateFmt:this.format,onpicked:function(){b._onPicked()}};this.min&&(c.minDate=this.min),this.max&&(c.maxDate=this.max),WdatePicker(c)},showSelector:function(){this._doShowCalendar()},setInputSize:function(a){var b=this.getInputEl();b.removeClass("input-"+this.inputSize),this.inputSize=a,a&&(isNaN(a)?b.addClass("input-"+this.inputSize):b.width(a))},getInputSize:function(){return this.inputSize},getInputEl:function(){return this.el.find(b)},getName:function(){return this.name},setName:function(a){this.name=a,this.getInputEl().attr("name",this.name)},setPlaceHolder:function(a){this.placeHolder=a,this.getInputEl().attr("placeHolder",this.placeHolder)},getValue:function(){return this.getInputEl().val()},setValue:function(a){a=d(a,this.format),this.getInputEl().val(a)},setMin:function(a){this.min=d(a,this.format)},getMin:function(){return this.min},setMax:function(a){this.max=d(a,this.format)},getMax:function(){return this.max},render:function(){this.el.html(a),this.set({placeHolder:this.placeHolder,name:this.name,inputSize:this.inputSize})}});var e='[data-role="wejs-datepicker"]';$we.autoRender(e,$we.DatePicker,{min:"string",max:"string",minGear:"string",maxGear:"string",name:"string",placeHolder:"string",value:"string",inputSize:"string",format:"string",doubleCalendar:"boolean",events:["change"]})}(),function(a,b){var c=function(a){var b=a==this.getPageIndex()?"active":"";return['<li i="',a,'" id="',this.id,"_page_",a,'" class="',b,'">','<a href="javascript:void(0);">'+(a+1)+"</a>","</li>"].join("")};a.Pagebar=a.extend(a.Component,{cls:"pagination",total:0,pageIndex:0,pageSize:20,__sizeShow:10,infoTmpl:'<span class="info">第{pageIndex}页，每页{pageSize}条，共{total}条记录</span>',events:[{event:"click",selector:"li",handler:"__doClickPageIndex"}],__doClickPageIndex:function(a){var c=b(a.currentTarget).attr("i");c&&this.__doChangeIndex(c)},__doChangeIndex:function(a){a-=0;var b=this.getPageIndex(),c=a;this.setPageIndex(a),this.__render(),this.fire("change",{oldIndex:b,newIndex:c,pageSize:this.getPageSize()})},__render:function(){var b=this.getPageCount(),d=this.getPageSize(),e=this.getPageIndex(),f=0==e?"disabled":"",g=e==b-1?"disabled":"",h=["<ul>"];if(h.push('<li class="'+f+'" i="0"><a href="javascript:void(0);">&laquo;</a></li>'),b<this.__sizeShow)for(var i=0;b>i;i++)h.push(c.call(this,i));else{var j=this.__sizeShow/2,k=e-j+1,l=e+j-1;for(e>=j&&h.push("<li><a>...</a></li>"),0>k&&(l-=k,k=0),l>=b&&(k-=l-b+1,l=b-1);l>=k;)h.push(c.call(this,k)),k++;b-j>e&&h.push("<li><a>...</a></li>")}return h.push('<li class="'+g+'" i="'+(b-1)+'"><a href="javascript:void(0);">&raquo;</a></li>'),h.push("</ul>"),this.infoTmpl&&h.push(a.parse(this.infoTmpl,{pageCount:b,pageSize:d,pageIndex:this.getPageIndex()+1,total:this.getTotal(),start:k,end:l})),h.join("")},setTotal:function(a){this.total=a,this.render()},getTotal:function(){return this.total},setPageIndex:function(a){a<this.getPageCount()&&(this.pageIndex=a)},getPageIndex:function(){return this.pageIndex},setPageSize:function(a){this.pageSize=a},getPageSize:function(){return this.pageSize},getParams:function(){return{pageIndex:this.pageIndex,pageSize:this.pageSize,total:this.total}},getPageCount:function(){return Math.ceil(this.getTotal()/this.getPageSize())},render:function(){var a=this.__render();this.el.html(a);for(var b=this.__pelList||[],c=0,d=b.length;d>c;c++)b[c].html(a)},renderTo:function(a){a=b(a),this.__pelList=this.__pelList||[],this.__pelList.push(a);var c=this.__render();a.html(c)}})}(wejs,jQuery),function(){$we.Select=$we.Component.extend({url:"",textField:"",valueField:"",data:[],nullText:"请选择...",autoLoad:!0,params:{},value:"",isAsync:!1,setData:function(a){this.data=a,this._renderData(a)},getData:function(){return this.data},getItem:function(a){var b=this.valueField,c=this.getDataBy(function(c,d,e){return c[b]==a});return c.length?c[0]:null},getDataBy:function(a){for(var b=this.data,c=[],d=0,e=b.length;e>d;d++){var f=b[d];a.call(this,f,d,b)&&c.push(f)}return c},getValue:function(){return this._getSelectEl().val},load:function(a){a=$.extend({},this.params,a),$we.ajax({async:this.isAsync,url:this.url,data:a,type:"POST",scope:this,onSuccess:this._loadSuccess,onFail:this._onFail})},_getSelectEl:function(){var a=this._selectEl;return a||(a="select"==this.el.get(0).tagName.toLowerCase()?this.el:this.el.find("select:firset"),this._selectEl=a),a},_renderData:function(a){var b=this._getSelectEl().get(0),c=this.textField,d=this.valueField,e=b.options;this.nullText&&e.add(new Option(this.nullText,""));for(var f=0,g=a.length;g>f;f++){var h=a[f],i=h[c],j=h[d];e.add(new Option(i,j))}},_loadSuccess:function(a){var b=a.data.rows;this.setData(b)},_loadFail:function(a){this.setData([])},doInit:function(){$we.Select.superclass.doInit.call(this),this.autoLoad&&this.load(),this.value&&this.setValue(value)}});var a='[data-role="wejs-select"]';$we.autoRender(a,$we.Select,{name:"string",url:"string",textField:"string",valueField:"string",autoLoad:"boolean",isAsync:"boolean",value:"string",params:"object",nullText:"string",data:"object"})}(),function(){var a=$we.Component.extend({el:"",index:0,data:[],navTmpl:"",contentTmpl:"",_getNavEl:function(){return this.el.find('[data-role="nav"]')},_getNavEls:function(){return this.el.find('[data-toggle="tab"]')},_getCurrentIndex:function(){return this._getNavEl().find(".active").index()},_getTargetData:function(a){return a=$(a),{flag:a.attr("data-flag"),id:a.attr("data-id")}},_onTabShown:function(a){var b={current:this._getTargetData(a.target),prev:this._getTargetData(a.relatedTarget)};this.fire("change",b)},setCurrentTitle:function(a){var b=this._getCurrentIndex();this.setTitle(b,a)},setTitle:function(a,b){this._getNavEls().eq(a).html(b)},initEvents:function(){var a=this;this._getNavEls().on("shown",function(b){a._onTabShown(b)})},select:function(a){isNaN(a)&&(a=this.index),this._getNavEls().eq(a).tab("show")},setData:function(a){this.data=a,this.render()},getCurrentTabData:function(){var a=this._getCurrentIndex();return this.getTabData(a)},getTabData:function(a){return this.data[a]},render:function(){var a=this.data;if(a.length){var b=$(this.navTmpl).tmpl(a),c=$(this.contentTmpl).tmpl(a);this._getNavEl().html(b),this.el.find('[data-role="content"]').html(c)}},doInit:function(){a.superclass.doInit.apply(this,arguments),this.index=this.index||0,this.select(this.index)}});$we.Tabs=a,$we.autoRender('[data-role="tabs"]',a,{index:"number"},!0),$we.autoRender('[data-role="wejs-tabs"]',a,{index:"number"},!0)}(),function(){var a='<div class="modal hide fade we-dialog" id="${id}" style="{{if width}}width:${width}px{{/if}}">                    <div class="modal-header" data-role="header">                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>                        <h4 data-role="title">${title}</h4>                    </div>                    <div class="modal-body" data-role="body" style="{{if height}}height:${height}px{{/if}}">                    </div>                    {{if hasFooter}}                    <div class="modal-footer" data-role="footer">                        {{each buttons}}                        <a href="javascript:void(0);" class="btn ${this.cls}" data-role="${this.name}">{{if this.icon}}<i class="icon ${this.icon}"</i>{{/if}}${this.text}</a>                        {{/each}}                    </div>                    {{/if}}                </div>',b="wejs_dialog_template";$.template(b,a);$we.apply($we,{modalShow:function(a){a=$(a),a.modal("show");var b=($we.getPageSize(),a.width()/2);a.css({marginLeft:-b})},modalHide:function(a){$(a).modal("hide")}});var c={sure:{text:"确定",cls:"btn-primary",handler:"doSure"},cancel:{text:"取消",handler:"doCancel"},yes:{text:"是",cls:"btn-primary",handler:"doSure"},no:{text:"否",handler:"doCancel"}};Dialog=$we.Component.extend({content:"",hasFooter:!0,width:0,height:0,title:"Dialog",buttons:["sure","cancel"],contentTmpl:"",contentData:{},_initButtons:function(){for(var a=[],b=this.buttons,d=this.events,e=0,f=b.length;f>e;e++){var g=b[e],h=c[g];h?(d.push({event:"click",handler:h.handler,selector:'[data-role="'+g+'"]'}),g={text:h.text,name:g,cls:h.cls}):d.push({event:"click",handler:g.handler,selector:'[data-role="'+g.name+'"]'}),a.push(g)}this.buttons=a},getElBy:function(a,b){return b=b||this.el,b.find('[data-role="'+a+'"]')},getBodyEl:function(){return this.getElBy("body")},getHeaderEl:function(){return this.getElBy("header")},getTitleEl:function(){var a=this.getHeaderEl();return this.getElBy("title",a)},getFooterEl:function(){return this.getElBy("footer")},getButtonElByFlag:function(a){var b=this.getFooterEl();return this.getElBy(a,b)},getTitle:function(){return this.getTitleEl().text()},getFormData:function(a){return $we.Form.getData(this.getBodyEl(a))},setFormData:function(a,b){$we.Form.setData(this.getBodyEl(),a,b)},setTitle:function(a){this.getTitleEl().html(a)},setContent:function(a){this.content=a,this.getBodyEl().html(a)},getContent:function(){return this.getBodyEl().html()},show:function(){$we.modalShow(this.el)},hide:function(){$we.modalHide(this.el)},getContentData:function(){return this.contentData},doInit:function(){if(!this.el){this._initButtons();var a=$.tmpl(b,{id:this.id,title:this.title,width:this.width,height:this.height,hasFooter:this.hasFooter,buttons:this.buttons});$(document.body).append(a),this.el=$("#"+this.id)}Dialog.superclass.doInit.apply(this,arguments),this.render()},doCancel:function(a){this.hide()},doSure:function(a){},render:function(a){var b=this.content;if(this.contentTmpl){var a=a||this.getContentData();b=$(this.contentTmpl).tmpl(a)}this.getBodyEl().html(b),$we.autoRender()}}),Dialog.create=function(a){return new Dialog(a)};var d=null;Dialog.alert=function(a){arguments.length>1&&(a={title:"提示",content:arguments[0],callback:arguments[1]}),$we.apply(a,{buttons:["sure"],doSure:function(a){this.callback&&this.callback(),this.hide()}}),a.content='<div class="we-dialog-alert"><i class="we-icon we-icon-alert"></i><div class="content">'+a.content+"</div></div>",d?d.set(a):d=Dialog.create(a),d.show()};var e=null;Dialog.confirm=function(a){$we.apply(a,{buttons:["sure","cancel"],doCancel:function(){this.callback&&this.callback(!1),this.hide()},doSure:function(a){this.callback&&this.callback(!0),this.hide()}}),a.content='<div class="we-dialog-confirm"><i class="we-icon we-icon-help"></i><div class="content">'+a.content+"</div></div>",e?e.set(a):e=Dialog.create(a),e.show()},$we.Dialog=Dialog}(),function(){$we.AutoComplete=$we.Component.extend({url:"",data:"",delay:500,name:"",valueName:"",paramName:"key",itemsCount:10,textField:"name",valueField:"id",filterType:"remote",_delayFilter:null,_currentIndex:-1,_onKeyup:function(){var a=this;this._delayFilter&&(clearTimeout(this._delayFilter),this._delayFilter=null),this._delayFilter=setTimeout(function(){a.filter()},this.delay)},_getDDMenuEl:function(){return $("#"+this.id+"-ddmenu")},_getHiddenEl:function(){return $("#"+this.id+"-val")},_doSelect:function(a){var b=$(a.currentTarget),c=b.attr("data-index"),d=b.text(),e=b.attr("data-val");this.el.val(d),this._getHiddenEl().val(e),this._currentIndex=c,this._getDDMenuEl().hide()},_initDDMenu:function(){var a=this._getDDMenuEl();a.length||(this.el.after(['<ul id="',this.id,'-ddmenu" class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu"></ul>'].join("")),this._getDDMenuEl().on("click","a",{
scope:this},function(a){var b=a.data.scope;b._doSelect(a)}).css({"min-width":this.el.outerWidth()}))},_initHidden:function(){this.el.after(['<input type="hidden" value="" name="',this.valueName,'" id="',this.id,'-val"/>'].join(""))},getSelected:function(){return-1!==this._currentIndex?this.data[this._currentIndex]:null},initEvents:function(){var a=this;this.el.on("keyup",function(b){a._onKeyup()}),this.el.on("blur",function(){setTimeout(function(){a._getDDMenuEl().hide()},100)}),this.el.on("focus",function(){a.filter()})},filter:function(){var a=this.el,b=a.offset(),c=a.val();if(c){switch(b.top+=a.outerHeight(),this.filterType){case"remote":this.loadData();break;default:this.matchData()}this._getDDMenuEl().show().offset(b)}},sorterData:function(a){return a},matchData:function(){for(var a=this.el.val(),b=this.data,c=[],d=Math.min(b.length,this.itemsCount),e=0;d>e;e++){var f=b[e],g=f[this.textField],h=f[this.valueField];"object"!=typeof f&&(g=f,h=f),-1!=h.indexOf(a)&&c.push(f)}this.sorterData(c),this.renderData(c)},loadData:function(){var a={__key:this.el.val()};this.data=[],$we.ajax({url:this.url,data:a,type:"POST",scope:this,onSuccess:function(a){this.data=a.data},onComplete:function(){this.sorterData(this.data),this.renderData(this.data)}})},renderData:function(a){this._initDDMenu();for(var b=Math.min(a.length,this.itemsCount),c=[],d=0;b>d;d++){var e=a[d],f=e[this.textField],g=e[this.valueField];"object"!=typeof e&&(f=e,g=e),c.push(['<li><a tabindex="-1" href="#" data-val="',g,'" data-index="',d,'">',f,"</a></li>"].join(""))}c=c.join(""),this._getDDMenuEl().html(c),this._getDDMenuEl().show()},doInit:function(){$we.AutoComplete.superclass.doInit.apply(this),this._initDDMenu(),this.valueName&&this._initHidden()}});var a='[data-role="wejs-autocomplete"]';$we.autoRender(a,$we.AutoComplete,{name:"string",valueName:"string",deploy:"number",valueField:"string",textField:"string",data:"object",url:"string",filterType:"string",events:["change"]})}(),function(){var a='[data-role="grid"]',b='[data-role="grid-list"]',c='[data-role="grid-item"]',d='[data-role="grid-pagebar"]',e='[data-role="empty-info"]',f='[data-role="btn-del"]',g='[data-role="row-checkbox"]',h='[data-role="all-checkbox"]',i="grid-row-selected";$we.Grid=$we.Component.extend({url:"",autoLoad:!1,gridRowTmpl:"#grid_row_tmpl",hasPagebar:!1,pageSize:20,pageIndex:0,keyField:"id",data:[],_dataMap:{},_ajaxRet:{},events:[{event:"click",selector:f,handler:"_doDel"},{event:"click",selector:c,handler:"_doSelectRow"},{event:"click",selector:h,handler:"_doSelectAllRow"}],_createMap:function(a){for(var b={},c=this.keyField,d=0,e=a.length;e>d;d++){var f=a[d];f[c]=f[c]||$we.createId(),b[f[c]]=f}return b},_cacheData:function(a){this.data=a,this._dataMap=this._createMap(a)},_doSelectRow:function(a){var b=this._getEventData(a),c=b.el,d=!c.hasClass(i),e=b.el.find(g);e.length&&(e=e.get(0),e.checked=d),d?c.addClass(i):c.removeClass(i),b.isSelected=d,this.fire("select",b)},_doSelectAllRow:function(a){var b=a.target;b.checked?this.selectAll():this.clearSelected()},_getDataIdByEl:function(a){return a.attr("data-id")},_getEventData:function(a){var b=$(a.currentTarget),c=this._getDataIdByEl(b);return{el:b,id:c}},_getSelectedRowEl:function(){return this.el.find(c).filter("."+i)},_getAllRowEl:function(){return this.el.find(c)},_getSelectedCheckboxEl:function(){return this.el.find(c).find(g+":checked")},_getAllCheckboxEl:function(){return this.el.find(c).find(g)},_doDel:function(a){},_renderList:function(a){var c=$(this.gridRowTmpl).tmpl(a);this.el.find(b).html(c)},getData:function(){return this.data},setData:function(a,b){this._cacheData(a),this.renderData(a),this.pagebar&&this.pagebar.setTotal(b)},getRow:function(a){return this.data?this.data[a]:null},getRowById:function(a){return this._dataMap[a]},getSelectedRow:function(){var a=[],b=this;return this._getSelectedRowEl().each(function(){var c=b._getDataIdByEl($(this)),d=b.getRowById(c);d&&a.push(d)}),a},getSelectedIds:function(){var a=[],b=this;return this._getSelectedRowEl().each(function(){var c=b._getDataIdByEl($(this));c&&a.push(c)}),a},invertRow:function(){this._getAllRowEl().each(function(){var a=$(this);a.hasClass(i)?(a.removeClass(i),a.find(g).attr("checked",!1)):(a.addClass(i),a.find(g).attr("checked",!0))})},selectAll:function(){this._getAllRowEl().addClass(i),this._getAllCheckboxEl().attr("checked",!0)},clearSelected:function(){this._getSelectedRowEl().removeClass(i),this._getSelectedCheckboxEl().attr("checked",!1)},addRow:function(a){var b=this.keyField;this.data.push(a),a[b]=a[b]||$we.createId(),this._dataMap[a[b]]=a,this.renderData(this.data)},removeRow:function(a){for(var b=[].concat(a),c=this.keyField,d=0,e=b.length;e>d;d++){var a=b[d],f=this.getRow(a);f&&(this.data.splice(a,1),delete this._dataMap[f[c]])}this.renderData(this.data)},removeRowById:function(a){for(var b=this.data,c=[].concat(a),d={},e=this.keyField,f=[],g=0,h=c.length;h>g;g++)d[c[g]]=!0;for(var g=0,h=b.length;h>g;g++){var i=b[g];d[i[e]]?delete this._dataMap[i[e]]:f.push(i)}this.data=f,this.renderData(this.data)},renderData:function(b){var c=this.el;b.length?(c.find(a).show(),c.find(e).hide(),this._renderList(b)):(c.find(a).hide(),c.find(e).show(),this._renderList([]))},load:function(a){$we.mask("loading");var b={};$we.apply(b,a),this.hasPagebar&&$we.apply(b,{pageSize:this.pageSize,pageIndex:this.pageIndex}),$we.ajax({scope:this,data:b,dataType:"json",url:this.url,type:"POST",onSuccess:function(a){this._ajaxRet=a;var b=a.data.rows,c=a.data.total;this.setData(b,c),this.fire("load-succ",a)},onFail:function(a){this.fire("load-fail",a)},onComplete:function(){$we.mask("hide")}})},createPagebar:function(){this.hasPagebar&&(this.pagebar||(this.pagebar=new $we.Pagebar({el:this.el.find(d),pageSize:this.pageSize,pageIndex:this.pageIndex}),this.pagebar.on("change",function(a){var b=a.eventData;this.pageIndex=b.newIndex,this.load()},this)))},doInit:function(){$we.Grid.superclass.doInit.apply(this,arguments),this.createPagebar(),this.autoLoad&&this.load()}}),$we.autoRender('[data-role="wejs-grid"]',$we.Grid,{autoLoad:"boolean",url:"string",autoLoad:"boolean",gridRowTmpl:"string",hasPagebar:"boolean",pageSize:"number",pageIndex:"number",data:"object"})}();